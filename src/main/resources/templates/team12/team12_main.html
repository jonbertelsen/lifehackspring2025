<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Sleeptracker</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="../../public/team12/css/team12_styles.css" th:href="@{/team12/css/team12_styles.css}" rel="stylesheet"/>
</head>
<body class="bg-custom">
<div class="page-container">
    <header class="header-app">
        <img class="logo" src="../../public/team12/images/SleepTrackerLogo.png" alt="Sleep Tracker Logo">
    </header>
    <form method="post">
        <div class="calculate-container">
            <h2>Time Duration Calculator</h2>

            <label for="sleep_start">Going to sleep at:</label>
            <input type="datetime-local" name="sleep_start" id="sleep_start" step="60" required>

            <label for="sleep_end">Waking up at:</label>
            <input type="datetime-local" name="sleep_end" id="sleep_end" step="60" required>

            <button type="submit" formaction="/calculate">Calculate Duration</button>
            <button type="reset">Clear</button>
        </div>
    </form>
    <script>
        function formatDateTime(dateTime) {
            const date = dateTime.toISOString().split('T')[0];
            const time = dateTime.toTimeString().split(' ')[0];
            return `${date} ${time}`;
        }

        function calculateDuration() {
            const startTime = document.getElementById('start-time').value;
            const endTime = document.getElementById('end-time').value;

            if (!startTime || !endTime) {
                document.getElementById('result').innerHTML = "<p style='color:red;'>Please enter both times.</p>";
                return;
            }

            const startDate = new Date(startTime);
            const endDate = new Date(endTime);

            if (endDate <= startDate) {
                document.getElementById('result').innerHTML = "<p style='color:red;'>End time must be after start time.</p>";
                return;
            }

            const durationMs = endDate - startDate;
            const hours = Math.floor(durationMs / (1000 * 60 * 60));
            const minutes = Math.floor((durationMs % (1000 * 60 * 60)) / (1000 * 60));

            const result = document.getElementById('result');
            result.innerHTML = `
                <p>The time between <strong>${formatDateTime(startDate)}</strong> and <strong>${formatDateTime(endDate)}</strong> is:</p>

                    <p>${hours} hours, ${minutes} minutes</p>

            `;
        }

        function clearForm() {
            document.getElementById('start-time').value = '';
            document.getElementById('end-time').value = '';
            document.getElementById('result').innerHTML = '';
        }
    </script>

    <footer class="footer-app">
        <a href="#" class="footer-btn">Logout</a>
        <a href="#" class="footer-btn">Dashboard</a>
    </footer>
</div>
</body>
</html>
